"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[3248],{3248:(z,u,o)=>{o.r(u),o.d(u,{matriculaModule:()=>J});var g=o(6814),c=o(707),v=o(8057),d=o(95),f=o(7853),Z=o(3714),S=o(9502),y=o(7161),m=o(4104),l=o(5628),p=o(5219),t=o(9467),U=o(3859),b=o(7696),M=o(1330),I=o(3076),P=o(2096),E=o(6306),T=o(553),A=o(9862);let C=(()=>{class s{constructor(i){this.http=i,this.API_SERVIDOR=T.N.API}postMatricula(i){return this.http.post(`${this.API_SERVIDOR}/matricula`,i).pipe((0,E.K)(this.handleError("RegistroMatricula")))}handleError(i="operation",r){return e=>(console.error(e),(0,P.of)(r))}static#t=this.\u0275fac=function(r){return new(r||s)(t.LFG(A.eN))};static#e=this.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var h=o(3965);let D=(()=>{class s{constructor(i,r,e,a,n,j,x){this.layoutService=i,this.router=r,this.usuarioService=e,this.service=a,this.datosUserService=n,this.userService=j,this.crud=x,this.activo=1,this.cedula="",this.periodo="",this.semestre="",this.nombre="",this.idEstudiante="",this.selectPeriodo=null,this.selectSemestre=null,this.dropdownItemsPeriodo=[],this.dropdownItemsSemestre=[],this.datosUsuario={},this.loading=[!1,!1,!1,!1]}ngOnInit(){this.datosUserService.getPeriodos().subscribe(r=>{this.dropdownItemsPeriodo=r.map(e=>({name:e.nombre,code:e.idPeriodo}))},r=>{this.mostrarError("Error al cargar periodos. Por favor, int\xe9ntelo de nuevo m\xe1s tarde."),console.error("Error en el servidor:",r)}),this.datosUserService.getSemestres().subscribe(r=>{this.dropdownItemsSemestre=r.map(e=>({name:e.nombre,code:e.idSemestre}))},r=>{this.mostrarError("Error al cargar semestres. Por favor, int\xe9ntelo de nuevo m\xe1s tarde."),console.error("Error en el servidor:",r)});const i=this.userService.getUser();i?(this.datosUsuario=i,this.nombre=this.datosUsuario.nombre,this.cedula=this.datosUsuario.cedula,this.idEstudiante=this.datosUsuario.idUsuario):this.mostrarError("No se encontr\xf3 el usuario. Por favor, int\xe9ntelo de nuevo m\xe1s tarde."),this.fecha=(new Date).toISOString().split("T")[0],this.hora=(new Date).toTimeString().split(" ")[0]}mostrarError(i){this.service.add({key:"tst",severity:"error",summary:"Mensaje de error",detail:i})}registrarMatricula(){if(!(this.cedula&&this.selectPeriodo?.code&&this.selectSemestre?.code&&this.idEstudiante))return void this.mostrarError("Ingrese todos los datos");const i=parseInt(this.selectPeriodo.code.toString(),10),r=parseInt(this.selectSemestre.code.toString(),10),e=parseInt(this.idEstudiante.toString(),10);this.crud.postMatricula({activo:this.activo,fecha:this.fecha,hora:this.hora,periodo:{idPeriodo:i},semestre:{idSemestre:r},usuario:{idUsuario:e}}).subscribe(a=>{console.log("Usuario matriculado",a),this.mostrarError("Usuario matriculado"),this.router.navigate(["/auth/login"])},a=>{this.mostrarError("Error al matricularse. Por favor, int\xe9ntelo de nuevo m\xe1s tarde."),console.error("Error en el registro:",a)})}regresar(){this.router.navigate(["/"])}static#t=this.\u0275fac=function(r){return new(r||s)(t.Y36(U.P),t.Y36(l.F0),t.Y36(b.i),t.Y36(p.ez),t.Y36(M.u),t.Y36(I.K),t.Y36(C))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-matricula"]],features:[t._Bn([p.ez])],decls:55,vars:12,consts:[[1,"layout-topbar"],["routerLink","",1,"layout-topbar-logo"],["alt","logo",3,"src"],[1,"p-link","layout-topbar-menu-button","layout-topbar-button"],["topbarmenubutton",""],[1,"pi","pi-ellipsis-v"],[1,"text-center","mb-5",2,"margin-top","80px"],[1,"text-900","text-3xl","font-medium","mb-3"],[1,"text-600","font-medium"],[1,"flex","flex-column","align-items-center","justify-content-center"],[2,"border-radius","56px","padding","0.3rem","background","linear-gradient(180deg, var(--primary-color) 10%, rgba(33, 150, 243, 0) 30%)"],[1,"w-full","surface-card","py-5","px-8","sm:px-8",2,"border-radius","53px","margin","20px,0px,20px,10px"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-6"],[1,"p-float-label"],["id","periodo","inputId","dropdown","optionLabel","name",3,"autoDisplayFirst","options","ngModel","ngModelChange"],["for","dropdown"],["id","semestre","inputId","dropdown","optionLabel","name",3,"autoDisplayFirst","options","ngModel","ngModelChange"],[1,"card","field","col-12","md:col-6"],["for","estudiante"],["for","periodo"],["for","semestre"],[1,"card,","field","col-12","md:col-6"],[1,"p-buttonset"],["pButton","","pRipple","","label","Matricularse","icon","pi pi-check",3,"click"],["pButton","","pRipple","","label","Cancelar","icon","pi pi-times",3,"click"],["key","tst"],[1,"layout-footer"],["alt","Logo","height","20",1,"mr-2",3,"src"],[1,"font-medium","ml-2"]],template:function(r,e){1&r&&(t.TgZ(0,"p"),t._uU(1,"matricula works!"),t.qZA(),t.TgZ(2,"div",0)(3,"a",1),t._UZ(4,"img",2),t.TgZ(5,"span"),t._uU(6,"ISI"),t.qZA()(),t.TgZ(7,"button",3,4),t._UZ(9,"i",5),t.qZA()(),t.TgZ(10,"div",6)(11,"div",7),t._uU(12,"\xa1Inscr\xedbete ahora ISI y alcanza tus metas!"),t.qZA(),t.TgZ(13,"span",8),t._uU(14,"Completa el siguiente formulario para formalizar tu matr\xedcula en el ISI y dar el primer paso hacia tu futuro profesional."),t.qZA()(),t.TgZ(15,"div")(16,"div",9)(17,"div",10)(18,"div",11)(19,"div",12)(20,"div",13)(21,"span",14)(22,"p-dropdown",15),t.NdJ("ngModelChange",function(n){return e.selectPeriodo=n}),t.qZA(),t.TgZ(23,"label",16),t._uU(24,"Periodo"),t.qZA()()(),t.TgZ(25,"div",13)(26,"span",14)(27,"p-dropdown",17),t.NdJ("ngModelChange",function(n){return e.selectSemestre=n}),t.qZA(),t.TgZ(28,"label",16),t._uU(29,"Semestre"),t.qZA()()(),t.TgZ(30,"div",18)(31,"h5"),t._uU(32,"Detalles"),t.qZA(),t.TgZ(33,"label",19),t._uU(34),t.qZA(),t._UZ(35,"br"),t.TgZ(36,"label",19),t._uU(37),t.qZA(),t._UZ(38,"br"),t.TgZ(39,"label",20),t._uU(40),t.qZA(),t._UZ(41,"br"),t.TgZ(42,"label",21),t._uU(43),t.qZA()(),t.TgZ(44,"div",22)(45,"span",23)(46,"button",24),t.NdJ("click",function(){return e.registrarMatricula()}),t.qZA(),t.TgZ(47,"button",25),t.NdJ("click",function(){return e.regresar()}),t.qZA()()()(),t._UZ(48,"p-toast",26),t.qZA()()()(),t.TgZ(49,"footer")(50,"div",27),t._UZ(51,"img",28),t._uU(52," by - "),t.TgZ(53,"span",29),t._uU(54,"Kevin Anilema - Paul Ruiz"),t.qZA()()()),2&r&&(t.xp6(4),t.MGl("src","assets/layout/images/","light"===e.layoutService.config().colorScheme?"logo-dark":"logo-white",".svg",t.LSH),t.xp6(18),t.Q6J("autoDisplayFirst",!1)("options",e.dropdownItemsPeriodo)("ngModel",e.selectPeriodo),t.xp6(5),t.Q6J("autoDisplayFirst",!1)("options",e.dropdownItemsSemestre)("ngModel",e.selectSemestre),t.xp6(7),t.hij("Estudiante: ",e.nombre,""),t.xp6(3),t.hij("Cedula: ",e.cedula,""),t.xp6(3),t.hij("Periodo: ",null==e.selectPeriodo?null:e.selectPeriodo.name,""),t.xp6(3),t.hij("Semestre: ",null==e.selectSemestre?null:e.selectSemestre.name,""),t.xp6(8),t.MGl("src","assets/layout/images/","light"===e.layoutService.config().colorScheme?"logo-dark":"logo-white",".svg",t.LSH))},dependencies:[l.rH,c.Hq,d.JJ,d.On,m.FN,h.Lt],styles:["[_nghost-%COMP%]     .pi-eye, [_nghost-%COMP%]     .pi-eye-slash{transform:scale(1.6);margin-right:1rem;color:var(--primary-color)!important}"]})}return s})(),F=(()=>{class s{static#t=this.\u0275fac=function(r){return new(r||s)};static#e=this.\u0275mod=t.oAB({type:s});static#r=this.\u0275inj=t.cJS({imports:[l.Bz.forChild([{path:"",component:D}]),l.Bz]})}return s})(),J=(()=>{class s{static#t=this.\u0275fac=function(r){return new(r||s)};static#e=this.\u0275mod=t.oAB({type:s});static#r=this.\u0275inj=t.cJS({imports:[g.ez,F,c.hJ,v.nD,Z.j,d.u5,f.gz,S.$,m.EV,y.O,h.kW]})}return s})()}}]);