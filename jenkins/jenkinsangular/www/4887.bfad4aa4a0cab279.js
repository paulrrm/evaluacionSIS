"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[4887],{4887:(_,h,o)=>{o.r(h),o.d(h,{CrudUserModule:()=>B});var s=o(6814),p=o(95),m=o(9552),f=o(3722),v=o(707),l=o(4480),U=o(4104),u=o(6340),d=o(6022),c=o(3714),g=o(6218),C=o(3965),A=o(1865),D=o(5167),M=o(5628),Z=o(5219),e=o(9467),T=o(3076),y=o(7696),x=o(7853),b=o(3530);function S(r,H){if(1&r){const i=e.EpF();e.TgZ(0,"div",17)(1,"label",18),e._uU(2,"Nombre"),e.qZA(),e.TgZ(3,"input",19),e.NdJ("ngModelChange",function(t){e.CHM(i);const a=e.oxw();return e.KtG(a.nombre=t)}),e.qZA()(),e.TgZ(4,"div",17)(5,"label",20),e._uU(6,"C\xe9dula"),e.qZA(),e.TgZ(7,"input",21),e.NdJ("ngModelChange",function(t){e.CHM(i);const a=e.oxw();return e.KtG(a.cedula=t)}),e.qZA()(),e.TgZ(8,"div",17)(9,"label",22),e._uU(10,"Correo"),e.qZA(),e.TgZ(11,"input",23),e.NdJ("ngModelChange",function(t){e.CHM(i);const a=e.oxw();return e.KtG(a.correo=t)}),e.qZA()(),e.TgZ(12,"div",17)(13,"label",22),e._uU(14,"Contrase\xf1a"),e.qZA(),e.TgZ(15,"p-password",24),e.NdJ("ngModelChange",function(t){e.CHM(i);const a=e.oxw();return e.KtG(a.clave=t)}),e.qZA()(),e.TgZ(16,"div",17)(17,"label",25),e._uU(18,"Direcci\xf3n"),e.qZA(),e.TgZ(19,"textarea",26),e.NdJ("ngModelChange",function(t){e.CHM(i);const a=e.oxw();return e.KtG(a.direccion=t)}),e.qZA()(),e.TgZ(20,"div",27)(21,"div",28)(22,"label",29),e._uU(23,"Tel\xe9fono"),e.qZA(),e.TgZ(24,"input",30),e.NdJ("ngModelChange",function(t){e.CHM(i);const a=e.oxw();return e.KtG(a.telefono=t)}),e.qZA()()()}if(2&r){const i=e.oxw();e.xp6(3),e.Q6J("ngModel",i.nombre),e.xp6(4),e.Q6J("ngModel",i.cedula),e.xp6(4),e.Q6J("ngModel",i.correo),e.xp6(4),e.Q6J("ngModel",i.clave)("toggleMask",!0),e.xp6(4),e.Q6J("ngModel",i.direccion),e.xp6(5),e.Q6J("ngModel",i.telefono)}}function E(r,H){if(1&r){const i=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.hideDialog())}),e.qZA(),e.TgZ(1,"button",32),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.actualizarDatosUser())}),e.qZA()}}const z=()=>({width:"450px"});let j=(()=>{class r{constructor(i,n,t,a){this.datosUsuerioService=i,this.servicioUsuario=n,this.service=t,this.userService=a,this.userDialog=!1,this.id="",this.nombre="",this.cedula="",this.correo="",this.clave="",this.direccion="",this.telefono="",this.rol="",this.fechaMatricula="",this.nombrePeriodo="",this.desdePeriodo="",this.hastaPeriodo="",this.nombreSemestre="",this.nombreCarrera=""}ngOnInit(){if(this.DatosUser=this.datosUsuerioService.getDatosUser(),this.DatosUser&&this.DatosUser.length>0){const i=this.DatosUser[0].usuario;this.id=i.idUsuario,this.nombre=i.nombre,this.cedula=i.cedula,this.correo=i.correo,this.clave=i.clave,this.direccion=i.direccion,this.telefono=i.telefono,this.rol=i.rol,this.fechaMatricula=this.DatosUser[0].fecha;const n=this.DatosUser[0].periodo;this.nombrePeriodo=n.nombre,this.desdePeriodo=n.desde,this.hastaPeriodo=n.hasta;const t=this.DatosUser[0].semestre;this.nombreSemestre=t.nombre,this.nombreCarrera=t.carrera.nombre}else console.error("No se encontraron datos de usuario");console.log(this.DatosUser)}mostrarMensaje(i){this.service.add({key:"tst",severity:"success",summary:"Mensaje",detail:i})}mostrarMensajeError(i){this.service.add({key:"tst",severity:"error",summary:"Mensaje",detail:i})}showDialog(){this.userDialog=!0}hideDialog(){this.userDialog=!1}actualizarDatosUser(){this.servicioUsuario.putUsuario({idUsuario:this.id,nombre:this.nombre,cedula:this.cedula,correo:this.correo,clave:this.clave,direccion:this.direccion,telefono:this.telefono,rol:this.rol}).subscribe(n=>{console.log("Datos antes de actualizar: ",this.userService.getDatosUser()),this.mostrarMensaje("Usuario actualizado"),this.hideDialog(),this.servicioUsuario.getMatriculaActiva(parseInt(this.id)).subscribe(t=>{t&&t.length>0&&t[0].activo&&(console.log("Datos del usuario activo:",t),this.userService.clearUser(),console.log("datos limpiados",this.userService.getDatosUser()),this.userService.setDatosUser(t),console.log("Datos despues de actualizar: ",t),console.log(this.userService.getDatosUser()))})},n=>{this.mostrarMensajeError("Error en la actualizacion de datos. Por favor, int\xe9ntelo de nuevo m\xe1s tarde."),console.log("Error al actualizar datos del usuario")})}static#e=this.\u0275fac=function(n){return new(n||r)(e.Y36(T.K),e.Y36(y.i),e.Y36(Z.ez),e.Y36(T.K))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-crud-user"]],features:[e._Bn([Z.ez])],decls:81,vars:16,consts:[[1,"grid"],[1,"col-12","md:col-6"],[1,"card"],[1,"surface-section"],[1,"lex","align-items-center","py-3","px-2","surface-border","flex-wrap"],[1,"list-none","p-0","m-0"],[1,"flex","align-items-center","py-3","px-2","border-top-1","surface-border","flex-wrap"],[1,"text-500","w-6","md:w-2","font-medium"],[1,"text-900","w-full","md:w-8","md:flex-order-0","flex-order-1"],[1,"flex","align-items-center","py-3","px-2","border-top-1","border-bottom-1","surface-border","flex-wrap"],[1,"text-900","w-full","md:w-8","md:flex-order-0","flex-order-1","line-height-3"],[1,"w-6","md:w-2","flex","justify-content-end"],["pButton","","pRipple","","label","Editar","icon","pi pi-pencil",1,"p-button-text",3,"click"],["key","tst"],["header","Detalles del Usuario",1,"p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],[1,"field"],["for","nombre"],["type","text","pInputText","","id","nombre","required","","autofocus","",3,"ngModel","ngModelChange"],["for","cedula"],["type","text","pInputText","","id","cedula","required","",3,"ngModel","ngModelChange"],["for","correo"],["type","email","pInputText","","id","correo","required","",3,"ngModel","ngModelChange"],["id","password","inputStyleClass","w-full p-3 md:w-30rem","autocomplete","new-password","required","",3,"ngModel","toggleMask","ngModelChange"],["for","direccion"],["id","direccion","pInputTextarea","","rows","3",3,"ngModel","ngModelChange"],[1,"formgrid","grid"],[1,"field","col"],["for","telefono"],["type","text","pInputText","","id","telefono",3,"ngModel","ngModelChange"],["pButton","","pRipple","","label","Cancelar","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Actualizar","icon","pi pi-check",1,"p-button-text",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3"),e._uU(6,"Informaci\xf3n del estudiante"),e.qZA()(),e.TgZ(7,"ul",5)(8,"li",6)(9,"div",7),e._uU(10," Estudiante "),e.qZA(),e.TgZ(11,"div",8),e._uU(12),e.qZA()(),e.TgZ(13,"li",6)(14,"div",7),e._uU(15," Cedula "),e.qZA(),e.TgZ(16,"div",8),e._uU(17),e.qZA()(),e.TgZ(18,"li",6)(19,"div",7),e._uU(20," Correo "),e.qZA(),e.TgZ(21,"div",8),e._uU(22),e.qZA()(),e.TgZ(23,"li",6)(24,"div",7),e._uU(25," Contrase\xf1a "),e.qZA(),e.TgZ(26,"div",8),e._uU(27," ********* "),e.qZA()(),e.TgZ(28,"li",6)(29,"div",7),e._uU(30," Direcci\xf3n "),e.qZA(),e.TgZ(31,"div",8),e._uU(32),e.qZA()(),e.TgZ(33,"li",9)(34,"div",7),e._uU(35," Tel\xe9fono "),e.qZA(),e.TgZ(36,"div",10),e._uU(37),e.qZA(),e.TgZ(38,"div",11)(39,"button",12),e.NdJ("click",function(){return t.showDialog()}),e.qZA()()()()()()(),e.TgZ(40,"div",1)(41,"div",2)(42,"div",3)(43,"div",4)(44,"h3"),e._uU(45,"Informaci\xf3n de la matricula y carrera"),e.qZA()(),e.TgZ(46,"ul",5)(47,"li",6)(48,"div",7),e._uU(49," Fecha de matricula "),e.qZA(),e.TgZ(50,"div",8),e._uU(51),e.qZA()(),e.TgZ(52,"li",6)(53,"div",7),e._uU(54," Semestre "),e.qZA(),e.TgZ(55,"div",8),e._uU(56),e.qZA()(),e.TgZ(57,"li",9)(58,"div",7),e._uU(59," Carrera "),e.qZA(),e.TgZ(60,"div",10),e._uU(61),e.qZA()(),e.TgZ(62,"li",6)(63,"div",7),e._uU(64," Periodo "),e.qZA(),e.TgZ(65,"div",8),e._uU(66),e.qZA()(),e.TgZ(67,"li",6)(68,"div",7),e._uU(69," Inicio de periodo "),e.qZA(),e.TgZ(70,"div",8),e._uU(71),e.qZA()(),e.TgZ(72,"li",6)(73,"div",7),e._uU(74," Fin de periodo "),e.qZA(),e.TgZ(75,"div",8),e._uU(76),e.qZA()()()()()()(),e._UZ(77,"p-toast",13),e.TgZ(78,"p-dialog",14),e.NdJ("visibleChange",function(P){return t.userDialog=P}),e.YNc(79,S,25,7,"ng-template",15)(80,E,2,0,"ng-template",16),e.qZA()),2&n&&(e.xp6(12),e.hij(" ",t.nombre," "),e.xp6(5),e.hij(" ",t.cedula," "),e.xp6(5),e.hij(" ",t.correo," "),e.xp6(10),e.hij(" ",t.direccion," "),e.xp6(5),e.hij(" ",t.telefono," "),e.xp6(14),e.hij(" ",t.fechaMatricula," "),e.xp6(5),e.hij(" ",t.nombreSemestre," "),e.xp6(5),e.hij(" ",t.nombreCarrera," "),e.xp6(5),e.hij(" ",t.nombrePeriodo," "),e.xp6(5),e.hij(" ",t.desdePeriodo," "),e.xp6(5),e.hij(" ",t.hastaPeriodo," "),e.xp6(2),e.Akn(e.DdM(15,z)),e.Q6J("visible",t.userDialog)("modal",!0))},dependencies:[Z.jx,v.Hq,p.Fj,p.JJ,p.Q7,p.On,l.H,U.FN,c.o,g.g,x.ro,b.V],encapsulation:2})}return r})(),J=(()=>{class r{static#e=this.\u0275fac=function(n){return new(n||r)};static#t=this.\u0275mod=e.oAB({type:r});static#i=this.\u0275inj=e.cJS({imports:[M.Bz.forChild([{path:"",component:j}]),M.Bz]})}return r})();var F=o(2169),I=o(8057),q=o(3259),w=o(9663);let B=(()=>{class r{static#e=this.\u0275fac=function(n){return new(n||r)};static#t=this.\u0275mod=e.oAB({type:r});static#i=this.\u0275inj=e.cJS({imports:[s.ez,J,m.U$,f.O,p.u5,v.hJ,l.T,U.EV,u.V,d.Xt,c.j,g.A,C.kW,A.cc,D.L$,F.o,I.nD,x.gz,q.z,b.S,w.zz,s.ez]})}return r})()},6218:(_,h,o)=>{o.d(h,{A:()=>v,g:()=>f});var s=o(9467),p=o(6814),m=o(95);let f=(()=>{class l{el;ngModel;control;cd;autoResize;onResize=new s.vpe;filled;cachedScrollHeight;ngModelSubscription;ngControlSubscription;constructor(u,d,c,g){this.el=u,this.ngModel=d,this.control=c,this.cd=g}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewChecked(){this.updateState()}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(u){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}resize(u){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(u||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}static \u0275fac=function(d){return new(d||l)(s.Y36(s.SBq),s.Y36(m.On,8),s.Y36(m.a5,8),s.Y36(s.sBO))};static \u0275dir=s.lG2({type:l,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(d,c){1&d&&s.NdJ("input",function(C){return c.onInput(C)}),2&d&&s.ekj("p-filled",c.filled)("p-inputtextarea-resizable",c.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}})}return l})(),v=(()=>{class l{static \u0275fac=function(d){return new(d||l)};static \u0275mod=s.oAB({type:l});static \u0275inj=s.cJS({imports:[p.ez]})}return l})()}}]);